(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{178:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII="},383:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII="},388:function(e,t,r){e.exports=r(793)},420:function(e,t){},448:function(e,t,r){},568:function(e,t,r){},757:function(e,t,r){},758:function(e,t,r){},788:function(e,t,r){},789:function(e,t,r){},790:function(e,t,r){},791:function(e,t,r){},792:function(e,t,r){},793:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(9),o=a.a.createContext(),s=r(357),l=r(39),u=r(44),i=r(70),p=r(78),m=r(359),f=(r(427),r(33)),O=r(41),b=r.n(O),d=r(61),y=r(132),g=r.n(y),E=function(){var e=Object(d.a)(b.a.mark((function e(t){var r,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.a.post("http://localhost:5000/api/user/login",t),e.next=3,r;case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(b.a.mark((function e(t){var r,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.a.post("http://localhost:5000/api/user/register",t),e.next=3,r;case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){return"Request failed with status code 403"===e.message&&window.location.replace("/403")},v="SET_LOADING_CREATE_USER",w="SET_ERROR_CREATE_USER",P="SET_DATA_CREATE_USER",A=function(e){return{type:v,value:e}},S=function(e){return{type:P,value:e}};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x={data:null,errors:{},loading:!1},C=function(e){e?g.a.defaults.headers.common.Authorization=e:delete g.a.defaults.headers.common.Authorization},k=r(169),I=r.n(k),R=function(e){return{type:"SET_LOADING_LOGIN_USER",value:e}},_=function(e){return{type:"SET_ERROR_LOGIN_USER",value:e}},T=function(e){return{type:"SET_CURENT_USER_LOGIN_USER",value:e}},U=function(e){return function(){var t=Object(d.a)(b.a.mark((function t(r){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r({type:"SET_DATA_LOGIN_USER",value:null}),r(R({loading:!0})),localStorage.removeItem("jwtToken"),C(!1),r(T({})),e.push("/login"),r(R({loading:!1}))}catch(n){r(R({loading:!1})),r(_(n)),h(n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length};function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M={isAuthenticated:!1,user:{},errors:{},loading:!1,refresh:!1},H=Object(p.c)({register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case w:return N({},e,{errors:t.value});case P:return N({},e,{data:t.value});case v:return N({},e,{loading:t.value});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_ERROR_LOGIN_USER":return G({},e,{errors:t.value});case"SET_LOADING_LOGIN_USER":return G({},e,{loading:t.value});case"SET_CURENT_USER_LOGIN_USER":return G({},e,{isAuthenticated:!L(t.value),user:t.value});default:return e}}}),q=Object(p.c)({user:H}),B=[m.a];var Y=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):p.d)(p.a.apply(void 0,B)),J=Object(p.e)(q,Y),V=(r(447),r(448),r(449),r(291)),K=r(97),Q=r(293),X=r(58),W=r(356),z=r(94),Z=r(7),$=r(40);function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var te=W.a.create({})(Object(l.b)((function(e,t){var r=e.user.login;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{authenticated:r.isAuthenticated,user:r.user,errors:r.errors})}),(function(e){return{loginUser:function(t,r){return e(function(e,t){return function(){var r=Object(d.a)(b.a.mark((function r(n){var a,c,o;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(R({loading:!0})),r.next=4,E(e,t);case 4:(a=r.sent).errors?n(_(a.errors)):(c=a.token,localStorage.setItem("jwtToken",c),C(c),o=I()(c),n(T(o)),n(R({loading:!1}))),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),n(R({loading:!1})),h(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()}(t,r))}}}))(Object(i.f)((function(e){var t=e.form,r=e.loginUser,c=e.history,o=e.authenticated,s=e.user,l=e.errors,u=t.getFieldDecorator,i=(t.getFieldsError,t.getFieldError),p=t.isFieldTouched;t.validateFields,p("email")&&i("email"),p("password")&&i("password");Object(n.useEffect)((function(){o&&c.push("/joinChat/".concat(s.id))}));return a.a.createElement(W.a,{onSubmit:function(e){e.preventDefault(),t.validateFieldsAndScroll((function(e,t){e||r(t,c)}))},className:"",style:{}},a.a.createElement(W.a.Item,null,u("email",{rules:[{required:!0,message:"Please input your email!"}]})(a.a.createElement(z.a,{prefix:a.a.createElement(Z.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"})),l.email?a.a.createElement("p",{style:{color:"red"}}," ",l.email):null),a.a.createElement(W.a.Item,null,u("password",{rules:[{required:!0,message:"Please input your Password!"}]})(a.a.createElement(z.a,{prefix:a.a.createElement(Z.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),l.password?a.a.createElement("p",{style:{color:"red"}}," ",l.password):null),a.a.createElement(W.a.Item,null,a.a.createElement($.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),a.a.createElement(K.a,null,"or ",a.a.createElement("a",{href:"/register"},"register now!"))))})))),re=r(95);function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ae=V.a.Header,ce=re.a.Item,oe=(re.a.SubMenu,Object(l.b)((function(e,t){var r=e.user.login;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{authenticated:r.isAuthenticated,user:r.user})}),(function(e){return{logoutUser:function(t){return e(U(t))}}}))(Object(i.f)((function(e){var t=e.current,r=e.authenticated,n=e.user,c=e.logoutUser,o=e.history;return a.a.createElement(ae,{tagName:"header"},a.a.createElement(re.a,{theme:"dark",mode:"horizontal",selectedKeys:[t],style:{lineHeight:"64px"}},a.a.createElement(ce,{disabled:!0},a.a.createElement(Z.a,{type:"user",style:{color:"white",height:"15px"}})),a.a.createElement(ce,{key:"CHATROOMS"},r&&a.a.createElement(u.b,{to:"/joinChat/".concat(n.id),className:"nav-text"},"Joindre un chat")),a.a.createElement(ce,{style:{float:"right"}},r&&a.a.createElement("span",{className:"nav-text",onClick:function(e){return c(o)}},a.a.createElement("img",{src:n.avatar,alt:n.name,title:n.name,className:"rounded-circle",style:{width:"25px",marginRight:"5px"}}),"Logout"),!r&&a.a.createElement(u.b,{to:"/login",className:"nav-text"},"Login"))))})))),se=function(){return a.a.createElement(V.a.Footer,{style:{textAlign:"center"}},"Application personnelle de chat")};function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ue=V.a.Content,ie=Object(l.b)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t)}),(function(){return{}}))(Object(i.f)((function(){return a.a.createElement(V.a,{className:"layout",style:{minHeight:"100vh"}},a.a.createElement(oe,{current:"LOGIN"}),a.a.createElement(ue,null,a.a.createElement(K.a,null,a.a.createElement(Q.a,null),a.a.createElement(X.a,{span:12,offset:6,style:{minHeight:"70vh",display:"flex",alignItems:"center",justifyContent:"center"}},a.a.createElement(te,null)))),a.a.createElement(se,null))})));function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var me=W.a.create({})(Object(l.b)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{errors:e.user.register.errors})}),(function(e){return{registerUser:function(t,r){return e(function(e,t){return function(){var r=Object(d.a)(b.a.mark((function r(n){var a;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(S(null)),n(A({loading:!0})),r.next=5,j(e);case 5:(a=r.sent).errors?n((c=a.errors,{type:w,value:c})):t.push("/login"),n(S(!0)),n(A({data:!1})),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),n(A({data:!1})),h(r.t0);case 15:case"end":return r.stop()}var c}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(t,r))}}}))(Object(i.f)((function(e){var t=e.form,r=e.registerUser,n=e.history,c=e.errors,o=t.getFieldDecorator,s=(t.getFieldsError,t.getFieldError),l=t.isFieldTouched;t.validateFields,l("userName")&&s("userName"),l("email")&&s("email"),l("password")&&s("password");return a.a.createElement(W.a,{onSubmit:function(e){e.preventDefault(),t.validateFieldsAndScroll((function(e,t){e||r(t,n)}))},className:"",style:{}},a.a.createElement(W.a.Item,null,o("pseudo",{rules:[{required:!0,message:"Please input your pseudo!"}]})(a.a.createElement(z.a,{prefix:a.a.createElement(Z.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),type:"pseudo",placeholder:"pseudo"})),c.pseudo?a.a.createElement("p",{style:{color:"red"}}," ",c.pseudo):null),a.a.createElement(W.a.Item,null,o("email",{rules:[{required:!0,message:"Please input your email!"}]})(a.a.createElement(z.a,{prefix:a.a.createElement(Z.a,{type:"link",style:{color:"rgba(0,0,0,.25)"}}),type:"email",placeholder:"Email"})),c.email?a.a.createElement("p",{style:{color:"red"}}," ",c.email):null),a.a.createElement(W.a.Item,null,o("password",{rules:[{required:!0,message:"Please input your Password!"},{validator:function(e,r,n){r&&t.validateFields(["confirm"],{force:!0}),n()}}]})(a.a.createElement(z.a.Password,{prefix:a.a.createElement(Z.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),c.password?a.a.createElement("p",{style:{color:"red"}}," ",c.password):null),a.a.createElement(W.a.Item,null,o("passwordConfirm",{rules:[{required:!0,message:"Please input your passwordConfirm!"},{validator:function(e,r,n){r&&r!==t.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()}}]})(a.a.createElement(z.a.Password,{prefix:a.a.createElement(Z.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"passwordConfirm",placeholder:"PasswordConfirm"})),c.passwordConfirm?a.a.createElement("p",{style:{color:"red"}}," ",c.passwordConfirm):null),a.a.createElement($.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"S'inscrire"))}))));function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Oe=V.a.Content,be=Object(l.b)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t)}),(function(){return{}}))(Object(i.f)((function(){return a.a.createElement(V.a,{className:"layout",style:{minHeight:"100vh"}},a.a.createElement(oe,{current:"HOME"}),a.a.createElement(Oe,null,a.a.createElement(K.a,null,a.a.createElement(Q.a,null),a.a.createElement(X.a,{span:12,offset:6,style:{minHeight:"70vh",display:"flex",alignItems:"center",justifyContent:"center"}},a.a.createElement(me,null)))),a.a.createElement(se,null))}))),de=r(62),ye=r(52),ge=r(296),Ee=(r(568),r(365)),je=r(366),he=r.n(je),ve=function(){var e=Object(d.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he()({title:"Please enter ".concat(t),placeholder:"Your ".concat(t),rules:[{required:!1,message:"You must enter ".concat(t)}]});case 2:if(!((r=e.sent).length>0)){e.next=7;break}return e.abrupt("return",r);case 7:return e.abrupt("return",(Object(Ee.a)("result"),r=""));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(e){var t=e.currentUser,r=e.user,n=e.history;return a.a.createElement(X.a,{md:7,style:{background:"white",border:"1px solid grey",padding:"5px",margin:"1px",pointer:"cursor"},onClick:function(){n.push("/chat/".concat(t,"/").concat(r.room))}},a.a.createElement(Z.a,{type:"user"}),"  ",r.name," est connect\xe9 sur le salon ",r.room)};function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ae=ye.a.Option,Se=function(e){var t=e.user,r=e.history,c=(e.props,e.socket),o=Object(n.useState)(t.pseudo),s=Object(de.a)(o,2),l=s[0],u=s[1],i=Object(n.useState)(""),p=Object(de.a)(i,2),m=p[0],f=p[1],O=Object(n.useState)(""),y=Object(de.a)(O,2),g=y[0],E=y[1],j=Object(n.useState)(["test"]),h=Object(de.a)(j,2),v=h[0],w=h[1],P=Object(n.useState)([]),A=Object(de.a)(P,2),S=A[0],D=A[1];Object(n.useEffect)((function(){c.on("rooms",(function(e){w(e)}))}),[v]),Object(n.useEffect)((function(){""!==g&&c.emit("rooms",g)}),[g]),Object(n.useEffect)((function(){c.on("users",(function(e){D(e)}))}),[S]),Object(n.useEffect)((function(){c.connect(),c.emit("rooms")}),[]),c.on("users",(function(e){D(e)}));var N=function(){var e=Object(d.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve("room");case 2:r=e.sent,E(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(K.a,{type:"flex",className:"joinOuterContainer",align:"middle"},a.a.createElement(X.a,{md:{span:12},xs:{span:24},className:"box colCenter"},a.a.createElement(X.a,{md:{span:12},xs:{span:24},className:""},a.a.createElement("h5",{className:"heading"},a.a.createElement("span",{style:{color:"white"}},"Joindre une salle de chat")),a.a.createElement("div",null,a.a.createElement(z.a,{prefix:a.a.createElement(Z.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"pseudo",defaultValue:t.pseudo,onChange:function(e){return u(e.target.value)}}),","),a.a.createElement(ye.a,{prefix:a.a.createElement(Z.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),style:{width:"100%"},placeholder:"Select ton salon",onChange:function(e){return f(e)},dropdownRender:function(e){return a.a.createElement("div",null,e,a.a.createElement(ge.a,{style:{margin:"4px 0"}}),a.a.createElement("div",{style:{padding:"4px 8px",cursor:"pointer"},onMouseDown:function(e){return e.preventDefault()},onClick:function(e){return N(e)}},a.a.createElement(Z.a,{type:"plus"})," Ajouter un salon"))}},v.map((function(e){return a.a.createElement(Ae,{key:e},e)}))),a.a.createElement($.a,{onClick:function(e){return l&&m?void r.push("/chat/".concat(l,"/").concat(m)):e.preventDefault()},type:"dashed",className:"mt-2"},a.a.createElement("span",{style:{color:"#0089c8"}},"Rejoindre")))),a.a.createElement(X.a,{md:{span:12},xs:{span:24},className:"box"},a.a.createElement("h5",{style:{color:"white"}},"Utilisateurs connect\xe9s"),a.a.createElement(K.a,{className:"",type:"flex",align:"middle",justify:S.length<3?"start":"center"},S.map((function(e){return a.a.createElement(we,{key:e,currentUser:l,history:r,user:e,bordered:!0})})))))},De=Object(l.b)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{user:e.user.login.user})}),(function(e){return{}}))(Object(i.f)((function(e){return a.a.createElement(o.Consumer,null,(function(t){return a.a.createElement(Se,Object.assign({},e,{socket:t}))}))})));r(757);function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var xe=V.a.Content,Ce=Object(l.b)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t)}),(function(){return{}}))(Object(i.f)((function(e){e.match;return a.a.createElement(V.a,{className:"layout",style:{minHeight:"100vh"}},a.a.createElement(oe,{current:"CHATROOMS"}),a.a.createElement(xe,{className:"JoinChatPageContainer"},a.a.createElement(K.a,null,a.a.createElement(Q.a,null),a.a.createElement(X.a,null,a.a.createElement(De,null)))),a.a.createElement(se,null))}))),ke=r(384),Ie=r(178),Re=r.n(Ie),_e=(r(758),function(e){var t=e.users,r=e.disconnect;return a.a.createElement(X.a,{md:12,sm:24,className:"textContainer"},a.a.createElement("div",null,a.a.createElement("h5",null,"Application de chat",a.a.createElement("span",{role:"img","aria-label":"emoji"},"\ud83d\udcac"))),t?a.a.createElement("div",null,a.a.createElement("p",null,"Personnes pr\xe9sentes sur le chat:"),a.a.createElement(X.a,{className:"activeContainer"},t.map((function(e){var t=e.name;return a.a.createElement(K.a,{key:t,className:"activeItem"},a.a.createElement("h3",null,t),a.a.createElement("img",{alt:"Online Icon",src:Re.a}))})),a.a.createElement($.a,{onClick:function(e){return r()},type:"primary",ghost:!0},"Se deconnecter"))):null)}),Te=r(382),Ue=r.n(Te),Le=(r(788),r(246)),Fe=r.n(Le),Ge=function(e){var t=e.message,r=t.text,n=t.user,c=!1,o=e.name.trim().toLowerCase();return n===o&&(c=!0),c?a.a.createElement("div",{className:"messageContainer justifyEnd"},a.a.createElement("p",{className:"sentText pr-10"},o),a.a.createElement("div",{className:"messageBox backgroundBlue"},a.a.createElement("p",{className:"messageText colorWhite"},Fe.a.emojify(r)))):a.a.createElement("div",{className:"messageContainer justifyStart"},a.a.createElement("div",{className:"messageBox backgroundLight"},a.a.createElement("p",{className:"messageText colorDark"},Fe.a.emojify(r))),a.a.createElement("p",{className:"sentText pl-10 "},n))},Me=(r(789),function(e){var t=e.messages,r=e.name;return a.a.createElement(Ue.a,{className:"messages"},"}",t.map((function(e,t){return a.a.createElement("div",{key:t},a.a.createElement(Ge,{message:e,name:r}))})))}),He=(r(790),function(e){var t=e.setMessage,r=e.sendMessage,n=e.message;return a.a.createElement("form",{className:"form"},a.a.createElement("input",{className:"input",type:"text",placeholder:"Type a message...",value:n,onChange:function(e){var r=e.target.value;return t(r)},onKeyPress:function(e){return"Enter"===e.key?r(e):null}}),a.a.createElement("button",{className:"sendButton",onClick:function(e){return r(e)}},"Send"))}),qe=r(383),Be=r.n(qe),Ye=(r(791),function(e){var t=e.room;return a.a.createElement("div",{className:"chatHeader"},a.a.createElement("div",{className:"leftInnerContainer"},a.a.createElement("img",{className:"onlineIcon",src:Re.a,alt:"online icon"}),a.a.createElement("h3",{style:{color:"white"}}," Salon ",t)),a.a.createElement("div",{className:"rightInnerContainer"},a.a.createElement("a",{href:"/"},a.a.createElement("img",{src:Be.a,alt:"close icon"}))))});r(792);function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ve=function(e){var t=e.match,r=e.userData,c=(e.props,e.socket),o=e.history,s=Object(n.useState)(""),l=Object(de.a)(s,2),u=l[0],i=l[1],p=Object(n.useState)(""),m=Object(de.a)(p,2),f=m[0],O=m[1],b=Object(n.useState)(""),d=Object(de.a)(b,2),y=d[0],g=d[1],E=Object(n.useState)(""),j=Object(de.a)(E,2),h=j[0],v=j[1],w=Object(n.useState)([]),P=Object(de.a)(w,2),A=P[0],S=P[1];Object(n.useEffect)((function(){var e=t.params,r=e.name,n=e.room;return O(n),i(r),c.emit("join",{name:r,room:n},(function(e){e&&alert(e),c.emit("getAllUser")})),function(){c.disconnect(),c.off()}}),[t.params]),Object(n.useEffect)((function(){c.on("message",(function(e){console.log("message"),S([].concat(Object(ke.a)(A),[e]))})),c.on("roomData",(function(e){var t=e.users;console.log("roomdata"),g(t)}))}),[A]);return a.a.createElement(K.a,{className:"outerContainer"},console.log("userLogin","login/"),a.a.createElement(X.a,{md:12,sm:24,className:"container"},a.a.createElement(Ye,{room:f}),a.a.createElement(Me,{messages:A,name:u}),a.a.createElement(He,{message:h,setMessage:v,sendMessage:function(e){e.preventDefault(),h&&c.emit("sendMessage",h,(function(){return v("")}))}})),a.a.createElement(_e,{users:y,disconnect:function(e){c.emit("disconnect"),c.off(),o.push("/joinChat/".concat(r.id))}}))},Ke=Object(l.b)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{userData:e.user.login.user})}),(function(){return{}}))(Object(i.f)((function(e){return a.a.createElement(o.Consumer,null,(function(t){return a.a.createElement(Ve,Object.assign({},e,{socket:t}))}))})));function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Xe=V.a.Content,We=[{name:"home",path:"/",component:ie},{name:"login",path:"/login",component:ie},{name:"register",path:"/register",component:be},{name:"joinChat",path:"/joinChat/:userId",component:Ce},{name:"chat",path:"/chat/:name/:room",component:Object(l.b)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t)}),(function(){return{}}))(Object(i.f)((function(e){var t=e.location;return a.a.createElement(V.a,{className:"layout",style:{minHeight:"100vh"}},a.a.createElement(oe,{current:"LOGIN"}),a.a.createElement(Xe,null,a.a.createElement(Ke,{location:t})),a.a.createElement(se,null))})))}];if(localStorage.jwtToken){C(localStorage.jwtToken);var ze=I()(localStorage.jwtToken);J.dispatch(T(ze));var Ze=Date.now()/1e3;ze.exp<Ze&&(J.dispatch(U()),window.location.href="/login")}var $e=s("http://127.0.0.1:5000");window.addEventListener("load",(function(e){console.log("load"),e.preventDefault()})),window.addEventListener("beforeunload",(function(e){console.log("beforeUnload"),e.preventDefault(),$e.emit("disconnect"),$e.off()})),Object(c.render)(a.a.createElement(o.Provider,{value:$e},a.a.createElement(l.a,{store:J},a.a.createElement(u.a,null,console.log("apprender"),a.a.createElement(i.c,null,We.map((function(e){return a.a.createElement(i.a,{key:e.name,exact:!0,path:e.path,component:e.component})})))))),document.getElementById("root"))}},[[388,1,2]]]);
//# sourceMappingURL=main.900badf7.chunk.js.map