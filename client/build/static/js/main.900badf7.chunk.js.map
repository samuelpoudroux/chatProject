{"version":3,"sources":["images/onlineIcon.png","images/closeIcon.png","socket-context.js","repository/user.js","helpers/error.js","store/actions/user/register.js","store/reducers/user/register.js","services/setAuthToken.js","store/actions/user/login.js","services/isEmpty.js","store/reducers/user/login.js","store/reducers/user/index.js","store/reducers/index.js","store/index.js","components/login/LoginForm.jsx","components/AppBar.jsx","components/Footer.jsx","views/login/LoginPage.js","components/register/RegisterForm.jsx","views/register/RegisterPage.js","services/handlePrompt.js","components/joinChat/card/Card.js","components/joinChat/JoinChat.jsx","views/joinChatPage/JoinChatPage.js","components/textContainer/TextContainer.jsx","components/messages/message/Message.jsx","components/messages/Messages.jsx","components/input/Input.jsx","components/chatHeader/ChatHeader.jsx","components/chat/Chat.jsx","views/chatPage/ChatPage.js","routes.js","index.js"],"names":["module","exports","SocketContext","React","createContext","login","user","a","req","axios","post","data","register","handleExceptions","err","message","window","location","replace","SET_LOADING","SET_ERROR","SET_DATA","setLoading","loading","type","value","setData","initialState","errors","setAuthToken","token","defaults","headers","common","setError","error","setCurrentUser","decoded","logoutUser","history","dispatch","localStorage","removeItem","push","isEmpty","undefined","Object","keys","length","trim","isAuthenticated","refresh","combineReducers","state","action","middleware","thunk","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","store","createStore","rootReducer","Form","create","connect","ownProps","authenticated","loginUser","userInfo","setItem","jwt_decode","withRouter","form","getFieldDecorator","getFieldError","getFieldsError","isFieldTouched","validateFields","useEffect","id","onSubmit","e","preventDefault","validateFieldsAndScroll","className","style","Item","rules","required","prefix","color","placeholder","email","password","htmlType","href","Header","Layout","Menu","SubMenu","current","tagName","theme","mode","selectedKeys","lineHeight","disabled","height","key","to","float","onClick","src","avatar","alt","name","title","width","marginRight","Footer","textAlign","Content","minHeight","span","offset","display","alignItems","justifyContent","registerUser","pseudo","validator","rule","callback","force","Password","getFieldValue","passwordConfirm","handlerPrompt","prompt","result","Card","currentUser","md","background","border","padding","margin","pointer","room","Option","Select","JoinChat","socket","props","useState","setName","setRoom","newRoom","setNewRoom","rooms","setRooms","users","setUsers","on","roomData","emit","addNewRoom","align","xs","defaultValue","onChange","event","target","dropdownRender","menu","cursor","onMouseDown","map","justify","bordered","Consumer","match","TextContainer","disconnect","sm","role","aria-label","onlineIcon","ghost","Message","text","isSentByCurrentUser","trimmedName","toLowerCase","ReactEmoji","emojify","Messages","messages","i","Input","setMessage","sendMessage","onKeyPress","ChatHeader","closeIcon","Chat","userData","setMessages","params","alert","off","console","log","process","path","component","LoginPage","RegisterPage","JoinChatPage","jwtToken","currentTime","Date","now","exp","io","addEventListener","render","Provider","routes","route","exact","document","getElementById"],"mappings":"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","file":"static/js/main.900badf7.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII=\"","\r\nimport React from 'react'\r\n\r\nconst SocketContext = React.createContext()\r\n\r\nexport default SocketContext","import axios from 'axios';\r\n\r\n// const DOMAIN = process.env.REACT_APP_URL\r\n// const API = process.env.REACT_APP_API\r\n// const USER = process.env.REACT_APP_USER\r\n// const REGISTER = process.env.REACT_APP_REGISTER\r\n// const LOGIN = process.env.REACT_APP_LOGIN\r\n\r\nconst URLLOGIN = 'http://localhost:5000/api/user/login';\r\nconst URLREGISTER = 'http://localhost:5000/api/user/register';\r\n\r\n\r\nexport const login = async (user) => {\r\n  const req = axios.post(URLLOGIN, user);\r\n  const {data} = await req;\r\n  return data;\r\n};\r\n\r\nexport const register = async (user) => {\r\n  const req = axios.post(URLREGISTER, user);\r\n  const {data} = await req;\r\n  return data;\r\n};\r\n\r\n\r\n","\r\n/**\r\n * gestionnaire d'erreur\r\n * @param err\r\n * @return {*}\r\n */\r\nexport const handleExceptions = (err) => {\r\n  // redirige vers une page indiquant à l'utilisateur qu'il n'a pas accès à la page en cas d'erreur 403\r\n  if (err.message === 'Request failed with status code 403') {\r\n    return window.location.replace('/403');\r\n  }\r\n  return false;\r\n};\r\n","import {register} from '../../../repository/user';\r\nimport {handleExceptions} from '../../../helpers/error';\r\n\r\nexport const SET_LOADING = 'SET_LOADING_CREATE_USER';\r\nexport const SET_ERROR = 'SET_ERROR_CREATE_USER';\r\nexport const SET_DATA = 'SET_DATA_CREATE_USER';\r\n\r\nexport const setLoading = (loading) => {\r\n  return {\r\n    type: SET_LOADING,\r\n    value: loading,\r\n  };\r\n};\r\n\r\nexport const setError = (error) => {\r\n  return {\r\n    type: SET_ERROR,\r\n    value: error,\r\n  };\r\n};\r\n\r\nexport const setData = (data) => {\r\n  return {\r\n    type: SET_DATA,\r\n    value: data,\r\n  };\r\n};\r\n\r\n/**\r\n * créé un user\r\n */\r\nexport const registerUser = (user, history) => async (dispatch) => {\r\n  try {\r\n    dispatch(setData(null));\r\n    dispatch(setLoading({\r\n      loading: true,\r\n    }));\r\n    const data = await register(user);\r\n    if (data.errors) {\r\n      dispatch(setError(data.errors));\r\n    } else {\r\n      history.push('/login');\r\n    }\r\n    dispatch(setData(true));\r\n    dispatch(\r\n        setLoading({\r\n          data: false,\r\n        }),\r\n    );\r\n  } catch (err) {\r\n    dispatch(\r\n        setLoading({\r\n          data: false,\r\n        }),\r\n    );\r\n    handleExceptions(err);\r\n  }\r\n};\r\n\r\n\r\n","import {SET_DATA, SET_ERROR, SET_LOADING} from '../../actions/user/register';\r\n\r\nconst initialState = {\r\n  data: null,\r\n  errors: {},\r\n  loading: false,\r\n};\r\n\r\nexport default (state = initialState, action = {}) => {\r\n  switch (action.type) {\r\n    case SET_ERROR:\r\n      return {\r\n        ...state,\r\n        errors: action.value,\r\n      };\r\n    case SET_DATA:\r\n      return {\r\n        ...state,\r\n        data: action.value,\r\n      };\r\n    case SET_LOADING:\r\n      return {\r\n        ...state,\r\n        loading: action.value,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import axios from 'axios';\r\n\r\nconst setAuthToken = (token) => {\r\n  if (token) {\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n  } else {\r\n    delete axios.defaults.headers.common['Authorization'];\r\n  }\r\n};\r\n\r\nexport default setAuthToken;\r\n","import {login} from '../../../repository/user';\r\nimport {handleExceptions} from '../../../helpers/error';\r\nimport setAuthToken from '../../../services/setAuthToken';\r\nimport jwt_decode from 'jwt-decode';\r\n\r\nexport const SET_LOADING = 'SET_LOADING_LOGIN_USER';\r\nexport const SET_ERROR = 'SET_ERROR_LOGIN_USER';\r\nexport const SET_DATA = 'SET_DATA_LOGIN_USER';\r\nexport const SET_CURRENT_USER = 'SET_CURENT_USER_LOGIN_USER';\r\n\r\n\r\nexport const setLoading = (loading) => {\r\n  return {\r\n    type: SET_LOADING,\r\n    value: loading,\r\n  };\r\n};\r\n\r\nexport const setData = (data) => {\r\n  return {\r\n    type: SET_DATA,\r\n    value: data,\r\n  };\r\n};\r\n\r\nexport const setError = (error) => {\r\n  return {\r\n    type: SET_ERROR,\r\n    value: error,\r\n  };\r\n};\r\n\r\n\r\nexport const setCurrentUser = (decoded) => {\r\n  return {\r\n    type: SET_CURRENT_USER,\r\n    value: decoded,\r\n  };\r\n};\r\n\r\n/**\r\n * créé un user\r\n */\r\nexport const loginUser = (user, history) => async (dispatch) => {\r\n  try {\r\n    dispatch(setLoading({\r\n      loading: true,\r\n    }));\r\n    const data = await login(user, history);\r\n    if (data.errors) {\r\n      dispatch(setError(data.errors));\r\n    } else {\r\n      const {token} = data;\r\n      localStorage.setItem('jwtToken', token);\r\n      setAuthToken(token);\r\n      const decoded = jwt_decode(token);\r\n      dispatch(setCurrentUser(decoded));\r\n      dispatch(setLoading({loading: false}));\r\n    }\r\n  } catch (err) {\r\n    dispatch(\r\n        setLoading({\r\n          loading: false,\r\n        }),\r\n    );\r\n    handleExceptions(err);\r\n  }\r\n};\r\n\r\nexport const logoutUser = (history) => async (dispatch) => {\r\n  try {\r\n    dispatch(setData(null));\r\n    dispatch(setLoading({\r\n      loading: true,\r\n    }));\r\n    localStorage.removeItem('jwtToken');\r\n    setAuthToken(false);\r\n    dispatch(setCurrentUser({}));\r\n    history.push('/login');\r\n    dispatch(\r\n        setLoading({\r\n          loading: false,\r\n        }),\r\n    );\r\n  } catch (err) {\r\n    dispatch(\r\n        setLoading({\r\n          loading: false,\r\n        }),\r\n    );\r\n    dispatch(setError(err));\r\n    handleExceptions(err);\r\n  }\r\n};\r\n","const isEmpty = (value) => {\r\n  return (\r\n    value === undefined ||\r\n        value === null ||\r\n        (typeof value === 'object' && Object.keys(value).length === 0) ||\r\n        (typeof value === 'string' && value.trim().length === 0)\r\n  );\r\n};\r\nexport default isEmpty;\r\n","import {SET_ERROR, SET_LOADING, SET_CURRENT_USER} from '../../actions/user/login';\r\nimport isEmpty from '../../../services/isEmpty';\r\n\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  user: {},\r\n  errors: {},\r\n  loading: false,\r\n  refresh: false\r\n};\r\n\r\nexport default (state = initialState, action = {}) => {\r\n  switch (action.type) {\r\n    case SET_ERROR:\r\n      return {\r\n        ...state,\r\n        errors: action.value,\r\n      };\r\n\r\n    case SET_LOADING:\r\n      return {\r\n        ...state,\r\n        loading: action.value,\r\n      };\r\n\r\n    case SET_CURRENT_USER:\r\n      return {\r\n        ...state,\r\n        isAuthenticated: !isEmpty(action.value),\r\n        user: action.value,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {combineReducers} from 'redux';\r\n\r\nimport register from './register';\r\nimport login from './login';\r\nimport socket from './'\r\n\r\n\r\nexport default combineReducers({\r\n  register, login,\r\n});\r\n","import {combineReducers} from 'redux';\r\n\r\nimport user from './user/';\r\n\r\n\r\nexport default combineReducers({\r\n  user, \r\n});\r\n\r\n","import {createStore, applyMiddleware, compose} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport {createLogger} from 'redux-logger';\r\nimport rootReducer from './reducers';\r\n\r\nconst middleware = [thunk];\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  middleware.push(createLogger());\r\n}\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n      // Specify extension’s options like name, actionsBlacklist, actionsCreators, serialize...\r\n    }) :\r\n    compose;\r\n\r\nconst enhancer = composeEnhancers(\r\n    applyMiddleware(...middleware),\r\n    // other store enhancers if any\r\n);\r\n\r\nconst store = createStore(rootReducer, enhancer);\r\n\r\nexport default store;\r\n","import React, {useEffect, useState} from 'react';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport {Button,  Form, Input, Icon, Row} from 'antd';\r\nimport {withRouter} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {loginUser} from '../../store/actions/user/login'\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      loginUser: (userInfo, history) => dispatch(loginUser(userInfo, history))\r\n    };\r\n  };\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const {isAuthenticated: authenticated, user: user, errors:errors} = state.user.login;\r\n    return {\r\n      ...ownProps,\r\n      authenticated,\r\n      user, \r\n      errors\r\n    }\r\n  };\r\n\r\nfunction hasErrors(fieldsError) {\r\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\r\n}\r\n\r\nconst LoginForm = ({form, loginUser, history, authenticated, user, errors}) => {\r\n    const { getFieldDecorator, getFieldsError, getFieldError, isFieldTouched, validateFields } = form;\r\n    const usernameError = isFieldTouched('email') && getFieldError('email');\r\n    const passwordError = isFieldTouched('password') && getFieldError('password');\r\n\r\n    useEffect(() => {\r\n      if(authenticated) {\r\n        history.push(`/joinChat/${user.id}`);\r\n      } \r\n    });\r\n    \r\n    \r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        // le scroll permet de scroller automatiquement vers un éventuel champ en erreur\r\n        form.validateFieldsAndScroll((err, userInfo) => {\r\n          if (!err) {\r\n           loginUser(userInfo, history)\r\n          }\r\n        });\r\n      };\r\n      return (\r\n        <Form onSubmit={handleSubmit} className=\"\" style={{}} >\r\n        <Form.Item>\r\n          {getFieldDecorator('email', {\r\n            rules: [{ required: true, message: 'Please input your email!'},\r\n          ],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              placeholder=\"email\"\r\n            />,\r\n          )}\r\n          { errors.email ? <p style={{ color: 'red' }}> { errors.email}</p> : null}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          {getFieldDecorator('password', {\r\n            rules: [{ required: true, message: 'Please input your Password!' }],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n            />\r\n          )}\r\n                    { errors.password ? <p style={{ color: 'red' }}> { errors.password}</p> : null}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n            Log in\r\n          </Button>\r\n          <Row>\r\n          or <a href=\"/register\">register now!</a>\r\n          </Row>\r\n        </Form.Item>\r\n      </Form>\r\n      );\r\n    }\r\n\r\nexport default Form.create({})(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(withRouter(LoginForm)));","import React from 'react';\r\nimport { Layout, Menu } from 'antd';\r\nimport { NavLink } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { Icon } from 'antd';\r\nimport { logoutUser } from '../store/actions/user/login'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nconst { Header } = Layout;\r\nconst { Item, SubMenu } = Menu;\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    logoutUser: (history) => dispatch(logoutUser(history))\r\n  };\r\n};\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const { isAuthenticated: authenticated, user: user } = state.user.login;\r\n  return {\r\n    ...ownProps,\r\n    authenticated,\r\n    user\r\n  }\r\n};\r\n\r\nconst AppBar = ({ current, authenticated, user, logoutUser, history }) => {\r\n  return (\r\n    <Header tagName={'header'}>\r\n      <Menu\r\n        theme=\"dark\"\r\n        mode=\"horizontal\"\r\n        selectedKeys={[current]}\r\n        style={{ lineHeight: '64px' }}\r\n      >\r\n        <Item disabled>\r\n          <Icon type=\"user\" style={{ color: 'white', height: \"15px\", }} />\r\n        </Item>\r\n\r\n        <Item key=\"CHATROOMS\">\r\n          {authenticated && <NavLink to={`/joinChat/${user.id}`} className=\"nav-text\">Joindre un chat</NavLink>}\r\n        </Item>\r\n\r\n        <Item style={{ float: 'right' }}>\r\n          {authenticated && <span className=\"nav-text\" onClick={e => logoutUser(history)}>\r\n            <img src={user.avatar} alt={user.name} title={user.name} className=\"rounded-circle\" style={{ width: '25px', marginRight: '5px' }} />Logout</span>}\r\n          {!authenticated && <NavLink to=\"/login\" className=\"nav-text\">Login</NavLink>}\r\n        </Item>\r\n\r\n\r\n\r\n      </Menu>\r\n    </Header>\r\n  );\r\n};\r\n\r\nAppBar.propTypes = {\r\n  current: PropTypes.string,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withRouter(AppBar));\r\n","import React from 'react';\r\nimport {Layout} from 'antd';\r\n\r\nconst Footer = () => (\r\n    <Layout.Footer style={{ textAlign: 'center' }}>Application personnelle de chat</Layout.Footer>\r\n);\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport {Layout, Row, Col, BackTop} from 'antd';\r\nimport LoginForm from '../../components/login/LoginForm';\r\nimport AppBar from '../../components/AppBar';\r\nimport Footer from '../../components/Footer';\r\nimport {connect} from 'react-redux';\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nconst {Content} = Layout;\r\n\r\nconst mapDispatchToProps = () => {\r\n  return {};\r\n};\r\nconst mapStateToProps = (state, ownProps) => {\r\n  // const {data: user} = state.user.getUserProfile;\r\n  return {\r\n    ...ownProps,\r\n  };\r\n};\r\n\r\nconst LoginPage = () => {\r\n  return (\r\n    <Layout className=\"layout\" style={{minHeight: '100vh'}}>\r\n      <AppBar current=\"LOGIN\"/>\r\n      <Content >\r\n        <Row >\r\n          <BackTop/>\r\n          <Col span={12} offset={6} style={{minHeight: '70vh', display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\r\n            <LoginForm />\r\n          </Col>\r\n        </Row>\r\n      </Content>\r\n      <Footer/>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps,\r\n)(withRouter(LoginPage));\r\n\r\n","import React, {useEffect, useState} from 'react';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport {Button, Divider, Form, Input, Icon,Checkbox, Col, notification, Select, Spin, Switch, Row} from 'antd';\r\nimport {withRouter} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport { registerUser } from '../../store/actions/user/register';\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      registerUser: (userInfo, history) => dispatch(registerUser(userInfo, history))\r\n    };\r\n  };\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const { errors:errors} = state.user.register;\r\n    return {\r\n      ...ownProps,\r\n      errors\r\n    };\r\n  };\r\n\r\nfunction hasErrors(fieldsError) {\r\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\r\n}\r\n\r\nconst RegisterForm = ({form,registerUser, history, errors}) => {\r\n    const { getFieldDecorator, getFieldsError, getFieldError, isFieldTouched, validateFields } = form;\r\n    const userNameError = isFieldTouched('userName') && getFieldError('userName');\r\n    const emailError = isFieldTouched('email') && getFieldError('email');\r\n    const passwordError = isFieldTouched('password') && getFieldError('password');\r\n    \r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        form.validateFieldsAndScroll((err, userInfo) => {\r\n          if (!err) {\r\n           registerUser(userInfo, history)\r\n          }\r\n        });\r\n      };\r\n      const compareToFirstPassword = (rule, value, callback) => {\r\n        if (value && value !== form.getFieldValue('password')) {\r\n          callback('Two passwords that you enter is inconsistent!');\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      \r\n      const validateToNextPassword = (rule, value, callback) => {\r\n        if (value) {\r\n          form.validateFields(['confirm'], { force: true });\r\n        }\r\n        callback();\r\n      };\r\n    \r\n      return (\r\n        <Form onSubmit={handleSubmit} className=\"\" style={{}} >\r\n        <Form.Item >\r\n          {getFieldDecorator('pseudo', {\r\n            rules: [{ required: true, message: 'Please input your pseudo!' }],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              type='pseudo'\r\n              placeholder=\"pseudo\"\r\n            />,\r\n          )}\r\n          { errors.pseudo ? <p style={{ color: 'red' }}> { errors.pseudo}</p> : null}\r\n        </Form.Item>\r\n        <Form.Item >\r\n          {getFieldDecorator('email', {\r\n            rules: [{ required: true, message: 'Please input your email!' }],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"link\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n            />,\r\n          )}\r\n          { errors.email ? <p style={{ color: 'red' }}> { errors.email}</p> : null}\r\n        </Form.Item>\r\n        <Form.Item >\r\n          {getFieldDecorator('password', {\r\n            rules: [{ required: true, message: 'Please input your Password!' },\r\n            {\r\n              validator: validateToNextPassword,\r\n            },],\r\n          })(\r\n            <Input.Password\r\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n            />,\r\n          )}\r\n          { errors.password ? <p style={{ color: 'red' }}> { errors.password}</p> : null}\r\n\r\n        </Form.Item>\r\n        <Form.Item >\r\n          {getFieldDecorator('passwordConfirm', {\r\n            rules: [{ required: true, message: 'Please input your passwordConfirm!' },\r\n            {validator: compareToFirstPassword}],\r\n          })(\r\n            <Input.Password\r\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              type=\"passwordConfirm\"\r\n              placeholder=\"PasswordConfirm\"\r\n            />,\r\n          )}\r\n                              { errors.passwordConfirm ? <p style={{ color: 'red' }}> { errors.passwordConfirm}</p> : null}\r\n\r\n        </Form.Item>  \r\n          <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n            S'inscrire\r\n          </Button>\r\n            </Form>\r\n      );\r\n    }\r\n\r\nexport default Form.create({})(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(withRouter(RegisterForm)));","import React from 'react';\r\nimport {Layout, Row, Col, BackTop} from 'antd';\r\nimport AppBar from '../../components/AppBar';\r\nimport Footer from '../../components/Footer';\r\nimport {connect} from 'react-redux';\r\nimport {withRouter} from 'react-router-dom';\r\nimport RegisterForm from '../../components/register/RegisterForm';\r\n\r\nconst {Content} = Layout;\r\n\r\nconst mapDispatchToProps = () => {\r\n  return {};\r\n};\r\nconst mapStateToProps = (state, ownProps) => {\r\n  // const {data: user} = state.user.getUserProfile;\r\n  return {\r\n    ...ownProps,\r\n    // user\r\n  };\r\n};\r\n\r\nconst RegisterPage = () => {\r\n  return (\r\n    <Layout className=\"layout\" style={{minHeight: '100vh'}}>\r\n      <AppBar current=\"HOME\"/>\r\n      <Content >\r\n        <Row >\r\n          <BackTop/>\r\n          <Col span={12} offset={6} style={{minHeight: '70vh', display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\r\n            <RegisterForm />\r\n          </Col>\r\n        </Row>\r\n      </Content>\r\n      <Footer/>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps,\r\n)(withRouter(RegisterPage));\r\n\r\n","import prompt from \"antd-prompt\";\r\n\r\nconst handlerPrompt  = async (data) => {\r\n      const result = await prompt({\r\n        title: `Please enter ${data}`,\r\n        placeholder: `Your ${data}`,\r\n        rules: [\r\n          // check this link for more help: https://ant.design/components/form/#Validation-Rules\r\n          {\r\n            required: false,\r\n            message: `You must enter ${data}`\r\n          }\r\n        ]\r\n      });\r\n      if(result.length > 0 ) {\r\n        return result\r\n      } else {\r\n        return result = ''\r\n    }\r\n  };\r\n\r\n  export default handlerPrompt","import React, {useEffect, useState} from 'react';\r\nimport {  Col, Icon } from 'antd';\r\n\r\nconst Card = ({currentUser, user, history}) => {\r\n    const goToRoom = () => {\r\n        history.push(`/chat/${currentUser}/${user.room}`)\r\n      }\r\n    return <Col md={7} style={{background:'white', border:'1px solid grey', padding:'5px', margin:'1px', pointer:'cursor'}} onClick={goToRoom}>\r\n      <Icon type='user'/>  {user.name} est connecté sur le salon {user.room}\r\n    </Col>\r\n}\r\nexport default Card","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { Select, Icon, Divider, Input, Button, message, Col, Row } from 'antd';\r\nimport { Link } from \"react-router-dom\";\r\nimport './JoinChat.css';\r\nimport SocketContext from '../../socket-context.js'\r\nimport handlerPrompt from '../../services/handlePrompt.js'\r\nimport Card from './card/Card'\r\n\r\n\r\nconst { Option } = Select;\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    // setUser: (userConnected, user) => dispatch(setUser(userConnected, user))\r\n\r\n  };\r\n};\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const { user: user } = state.user.login;\r\n  // const { userConnected: userConnected} = state.socket.socket;\r\n  return {\r\n    ...ownProps,\r\n    user,\r\n  }\r\n};\r\n\r\nconst JoinChat = ({ user, history, props, socket }) => {\r\n  const [name, setName] = useState(user.pseudo);\r\n  const [room, setRoom] = useState('');\r\n  const [newRoom, setNewRoom] = useState('')\r\n  const [rooms, setRooms] = useState([\"test\"]);\r\n  const [users, setUsers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    socket.on('rooms', (roomData) => {\r\n      setRooms(roomData);\r\n    })\r\n  }, [rooms]);\r\n\r\n  useEffect(() => {\r\n    if (newRoom !== '') {\r\n      socket.emit('rooms', newRoom)\r\n    }\r\n  }, [newRoom])\r\n\r\n  useEffect(() => {\r\n    socket.on('users', users => {\r\n      setUsers(users)\r\n    })\r\n  }, [users])\r\n\r\n  useEffect(() => {\r\n    socket.connect()\r\n    socket.emit('rooms')\r\n  }, [])\r\n\r\n  socket.on('users', users => {\r\n    setUsers(users)\r\n  })\r\n\r\n  const goToRoom = () => {\r\n    history.push(`/chat/${name}/${room}`)\r\n  }\r\n\r\n  const addNewRoom = async (e) => {\r\n    const result = await handlerPrompt(\"room\")\r\n    setNewRoom(result)\r\n  };\r\n  return (\r\n    <Row type='flex' className=\"joinOuterContainer\" align=\"middle\" >\r\n      <Col md={{ span: 12 }} xs={{ span: 24 }} className=\"box colCenter\" >\r\n        <Col md={{ span: 12 }} xs={{ span: 24 }} className=\"\" >\r\n          <h5 className=\"heading\"><span style={{ color: 'white' }}>Joindre une salle de chat</span></h5>\r\n\r\n          <div>\r\n            <Input\r\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              placeholder=\"pseudo\"\r\n              defaultValue={user.pseudo}\r\n              onChange={(event) => setName(event.target.value)}\r\n            />,\r\n              </div>\r\n          <Select\r\n            prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n            style={{ width: \"100%\" }}\r\n            placeholder=\"Select ton salon\"\r\n            onChange={value => setRoom(value)}\r\n            dropdownRender={menu => (\r\n              <div>\r\n                {menu}\r\n                <Divider style={{ margin: '4px 0' }} />\r\n                <div\r\n                  style={{ padding: '4px 8px', cursor: 'pointer' }}\r\n                  onMouseDown={e => e.preventDefault()}\r\n                  onClick={e => addNewRoom(e)}\r\n                >\r\n                  <Icon type=\"plus\" /> Ajouter un salon\r\n                </div>\r\n              </div>\r\n            )}\r\n          >\r\n            {rooms.map(room => (\r\n              <Option key={room}>{room}</Option>\r\n            ))}\r\n          </Select>\r\n          <Button onClick={e => (!name || !room) ? e.preventDefault() : goToRoom()} type='dashed' className={'mt-2'}><span style={{ color: '#0089c8' }}>Rejoindre</span></Button>\r\n        </Col>\r\n      </Col>\r\n      <Col md={{ span: 12 }} xs={{ span: 24 }} className='box'>\r\n        <h5 style={{ color: 'white' }} >Utilisateurs connectés</h5 >\r\n        <Row className='' type='flex' align=\"middle\" justify={users.length < 3 ? 'start' : \"center\"} >\r\n          {users.map(user => {\r\n            return <Card key={user} currentUser={name} history={history} user={user} bordered={true} />\r\n          })}\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n  alert(\"merci de renseigner au moins les champs room et pseudo\")\r\n}\r\nJoinChat.propTypes = {\r\n  userData: PropTypes.object,\r\n  match: PropTypes.object,\r\n};\r\n\r\nconst joinChatWithSocket = props => {\r\n  return <SocketContext.Consumer>\r\n    {socket => <JoinChat {...props} socket={socket} />}\r\n  </SocketContext.Consumer>\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withRouter(joinChatWithSocket));","import React, {useEffect} from 'react';\r\nimport {Layout, Row, Col, BackTop} from 'antd';\r\nimport AppBar from '../../components/AppBar';\r\nimport Footer from '../../components/Footer';\r\nimport {connect} from 'react-redux';\r\nimport {withRouter} from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport JoinChat from '../../components/joinChat/JoinChat';\r\nimport './JoinChatPage.css'\r\n\r\n\r\nconst {Content} = Layout;\r\n\r\nconst mapDispatchToProps = () => {\r\n  return {};\r\n};\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return {\r\n    ...ownProps,\r\n  };\r\n};\r\n\r\n\r\nconst JoinChatPage = ({match}) => {\r\n\r\n  // useEffect(() => {\r\n  //           window.location.reload()\r\n\r\n  // }, [])\r\n  return (\r\n    <Layout className=\"layout\" style={{minHeight: '100vh'}}>\r\n      <AppBar current=\"CHATROOMS\"/>\r\n      <Content className=\"JoinChatPageContainer\">\r\n        <Row >\r\n          <BackTop/>\r\n          <Col>\r\n            <JoinChat/>\r\n          </Col>\r\n        </Row>\r\n      </Content>\r\n      <Footer/>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nJoinChatPage.propTypes = {\r\n  match: PropTypes.object,\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps,\r\n)(withRouter(JoinChatPage));\r\n\r\n","import React from 'react';\r\n\r\nimport onlineIcon from '../../images/onlineIcon.png';\r\nimport { Col, Row, Button } from 'antd';\r\n\r\nimport './TextContainer.css';\r\n\r\nconst TextContainer = ({ users, disconnect }) => (\r\n  <Col md={12} sm={24} className=\"textContainer\">\r\n    <div>\r\n      <h5>Application de chat<span role=\"img\" aria-label=\"emoji\">💬</span></h5>\r\n    </div>\r\n    {\r\n      users\r\n        ? (\r\n          <div>\r\n            <p>Personnes présentes sur le chat:</p>\r\n            <Col className=\"activeContainer\">\r\n              {users.map(({ name }) => (\r\n                <Row key={name} className=\"activeItem\">\r\n                  <h3>{name}</h3>\r\n                  <img alt=\"Online Icon\" src={onlineIcon} />\r\n                </Row>\r\n              ))}\r\n\r\n              <Button onClick={(e) => disconnect()} type=\"primary\" ghost>\r\n                Se deconnecter\r\n              </Button>\r\n            </Col>\r\n          </div>\r\n        )\r\n        : null\r\n    }\r\n  </Col>\r\n);\r\n\r\nexport default TextContainer;","import React from 'react';\r\n\r\nimport './Message.css';\r\n\r\nimport ReactEmoji from 'react-emoji';\r\n\r\nconst Message = ({ message: { text, user }, name }) => {\r\n  let isSentByCurrentUser = false;\r\n\r\n  const trimmedName = name.trim().toLowerCase();\r\n\r\n  if(user === trimmedName) {\r\n    isSentByCurrentUser = true;\r\n  }\r\n\r\n  return (\r\n    isSentByCurrentUser\r\n      ? (\r\n        <div className=\"messageContainer justifyEnd\">\r\n          <p className=\"sentText pr-10\">{trimmedName}</p>\r\n          <div className=\"messageBox backgroundBlue\">\r\n            <p className=\"messageText colorWhite\">{ReactEmoji.emojify(text)}</p>\r\n          </div>\r\n        </div>\r\n        )\r\n        : (\r\n          <div className=\"messageContainer justifyStart\">\r\n            <div className=\"messageBox backgroundLight\">\r\n              <p className=\"messageText colorDark\">{ReactEmoji.emojify(text)}</p>\r\n            </div>\r\n            <p className=\"sentText pl-10 \">{user}</p>\r\n          </div>\r\n        )\r\n  );\r\n}\r\n\r\nexport default Message;","import React from 'react';\r\n\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\n\r\nimport Message from './message/Message';\r\n\r\nimport './Messages.css';\r\n\r\nconst Messages = ({ messages, name }) => (\r\n  <ScrollToBottom className=\"messages\">\r\n}\r\n    {messages.map((message, i) => <div key={i}><Message message={message} name={name}/></div>)}\r\n  </ScrollToBottom>\r\n);\r\n\r\nexport default Messages;","import React from 'react';\r\n\r\nimport './Input.css';\r\n\r\nconst Input = ({ setMessage, sendMessage, message }) => (\r\n  <form className=\"form\">\r\n    <input\r\n      className=\"input\"\r\n      type=\"text\"\r\n      placeholder=\"Type a message...\"\r\n      value={message}\r\n      onChange={({ target: { value } }) => setMessage(value)}\r\n      onKeyPress={event => event.key === 'Enter' ? sendMessage(event) : null}\r\n    />\r\n    <button className=\"sendButton\" onClick={e => sendMessage(e)}>Send</button>\r\n  </form>\r\n)\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nimport onlineIcon from '../../images/onlineIcon.png';\r\nimport closeIcon from '../../images/closeIcon.png';\r\n\r\nimport './ChatHeader.css';\r\n\r\nconst ChatHeader = ({ room }) => (\r\n  <div className=\"chatHeader\">\r\n    <div className=\"leftInnerContainer\">\r\n      <img className=\"onlineIcon\" src={onlineIcon} alt=\"online icon\" />\r\n      <h3 style={{color:'white'}}> Salon {room}</h3>\r\n    </div>\r\n    <div className=\"rightInnerContainer\">\r\n      <a href=\"/\"><img src={closeIcon} alt=\"close icon\" /></a>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default ChatHeader;","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport TextContainer from '../textContainer/TextContainer';\r\nimport Messages from '../messages/Messages';\r\nimport Input from '../input/Input';\r\nimport { Col, Row } from 'antd';\r\nimport ChatHeader from \"../chatHeader/ChatHeader\";\r\nimport './Chat.css';\r\nimport SocketContext from '../../socket-context'\r\n\r\nconst mapDispatchToProps = () => {\r\n  return {};\r\n};\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const { user: userData } = state.user.login;\r\n  return {\r\n    ...ownProps,\r\n    userData\r\n  };\r\n};\r\n\r\nconst Chat = ({ match, userData, props, socket, history }) => {\r\n  const [name, setName] = useState('');\r\n  const [room, setRoom] = useState('');\r\n  const [users, setUsers] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const { name, room } = match.params\r\n    setRoom(room);\r\n    setName(name);\r\n    socket.emit('join', { name, room }, (error) => {\r\n      if (error) {\r\n        alert(error);\r\n      };\r\n      socket.emit('getAllUser')\r\n    });\r\n    return () => {\r\n      socket.disconnect()\r\n      socket.off()\r\n    }\r\n  }, [match.params]);\r\n\r\n  useEffect(() => {\r\n    socket.on('message', (message) => {\r\n      console.log('message')\r\n      setMessages([...messages, message]);\r\n    });\r\n\r\n    socket.on('roomData', ({ users }) => {\r\n      console.log('roomdata')\r\n      setUsers(users);\r\n    })\r\n  }, [messages])\r\n\r\n  const sendMessage = (event) => {\r\n    event.preventDefault();\r\n    if (message) {\r\n      socket.emit('sendMessage', message, () => setMessage(''));\r\n    }\r\n  }\r\n  const leaveRoom = (e) => {\r\n    socket.emit('disconnect');\r\n    socket.off();\r\n    history.push(`/joinChat/${userData.id}`)\r\n  }\r\n\r\n  return (\r\n    <Row className=\"outerContainer\">\r\n      {console.log('userLogin', process.env.REACT_APP_LOGIN)}\r\n      <Col md={12} sm={24} className=\"container\">\r\n        <ChatHeader room={room} />\r\n        <Messages messages={messages} name={name} />\r\n        <Input message={message} setMessage={setMessage} sendMessage={sendMessage} />\r\n      </Col>\r\n      <TextContainer users={users} disconnect={leaveRoom} />\r\n    </Row>\r\n  );\r\n}\r\n\r\nconst ChatWithSocket = props => {\r\n  return <SocketContext.Consumer>\r\n    {socket => <Chat {...props} socket={socket} />}\r\n  </SocketContext.Consumer>\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(withRouter(ChatWithSocket));\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport {Layout, Row, Col, BackTop} from 'antd';\r\nimport LoginForm from '../../components/login/LoginForm';\r\nimport AppBar from '../../components/AppBar';\r\nimport Footer from '../../components/Footer';\r\nimport {connect} from 'react-redux';\r\nimport {withRouter} from 'react-router-dom';\r\nimport Chat from '../../components/chat/Chat';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nconst {Content} = Layout;\r\n\r\nconst mapDispatchToProps = () => {\r\n  return {};\r\n};\r\nconst mapStateToProps = (state, ownProps) => {\r\n  // const {data: user} = state.user.getUserProfile;\r\n  return {\r\n    ...ownProps,\r\n  };\r\n};\r\n\r\nconst ChatPage = ({location}) => {\r\n  return (\r\n    <Layout className=\"layout\" style={{minHeight: '100vh'}}>\r\n      <AppBar current=\"LOGIN\"/>\r\n      <Content >\r\n           <Chat location= {location}/>\r\n      </Content>\r\n      <Footer/>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nChatPage.propTypes = {\r\n        match: PropTypes.object,\r\n      };\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps,\r\n)(withRouter(ChatPage));\r\n\r\n","import LoginPage from './views/login/LoginPage';\r\nimport RegisterPage from './views/register/RegisterPage';\r\nimport JoinChatPage from './views/joinChatPage/JoinChatPage';\r\nimport ChatPage from './views/chatPage/ChatPage';\r\n\r\n\r\nexport default [\r\n  {\r\n    name: 'home',\r\n    path: '/',\r\n    component: LoginPage,\r\n  },\r\n  {\r\n    name: 'login',\r\n    path: '/login',\r\n    component: LoginPage,\r\n  },\r\n  {\r\n    name: 'register',\r\n    path: '/register',\r\n    component: RegisterPage,\r\n  },\r\n  {\r\n    name: 'joinChat',\r\n    path: '/joinChat/:userId',\r\n    component: JoinChatPage,\r\n  },\r\n  {\r\n    name: 'chat',\r\n    path: '/chat/:name/:room',\r\n    component: ChatPage,\r\n  },\r\n\r\n];\r\n","import React,{useState, useEffect} from 'react';\r\nimport {render} from 'react-dom';\r\nimport SocketContext from './socket-context'\r\nimport * as io from 'socket.io-client'\r\nimport {Provider} from 'react-redux';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport {Route, Switch} from 'react-router';\r\nimport store from './store';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './index.css';\r\nimport 'antd/dist/antd.css';\r\nimport routes from './routes';\r\nimport jwt_decode from 'jwt-decode';\r\nimport setAuthToken from './services/setAuthToken';\r\nimport {setCurrentUser, logoutUser} from './store/actions/user/login';\r\n\r\n\r\nif (localStorage.jwtToken) {\r\n  setAuthToken(localStorage.jwtToken);\r\n  const decoded = jwt_decode(localStorage.jwtToken);\r\n  store.dispatch(setCurrentUser(decoded));\r\n\r\n  const currentTime = Date.now() / 1000;\r\n  if (decoded.exp < currentTime) {\r\n    store.dispatch(logoutUser());\r\n    window.location.href = '/login';\r\n  }\r\n}\r\n\r\nvar socket = io('http://127.0.0.1:5000')\r\n;\r\n\r\nwindow.addEventListener('load', function (e) {\r\n  console.log('load')\r\n  e.preventDefault();\r\n});\r\n\r\n\r\nwindow.addEventListener('beforeunload', function (e) {\r\n  console.log('beforeUnload')\r\n  e.preventDefault();\r\n  socket.emit('disconnect')\r\n  socket.off()\r\n  // window.location.href = '/login';\r\n});\r\n\r\n// const [reload, setReload] = useState(false)\r\n\r\n// useEffect(() => {\r\n//   socket.on('disconnect', () => {\r\n//     setReload(!reload)\r\n//   })\r\n// }, [])\r\n\r\nrender(\r\n  <SocketContext.Provider value={socket}>\r\n    <Provider store={store}>\r\n      <BrowserRouter >\r\n      {console.log('apprender')}\r\n        <Switch>\r\n          {routes.map((route) => (\r\n            <Route key={route.name} exact path={route.path} component={route.component} />\r\n          ))}\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </Provider>\r\n    </SocketContext.Provider>,\r\n\r\n    document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}